syntax = "proto3";

package scraper;

option go_package = "github.com/UnknownOlympus/olympus-protos/gen/go/scraper/olympus";

import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

message Employee {
  int64 id = 1;
  string fullname = 2;
  string shortname = 3;
  string position = 4;
  string email = 5;
  string phone = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

message Task {
  int64 id = 1;
  string type = 2;
  google.protobuf.Timestamp creation_date = 3;
  google.protobuf.Timestamp closing_date = 4;
  string description = 5;
  string address = 6;
  string customer_name = 7;
  string customer_login = 8;
  repeated string comments = 9;
  repeated string executors = 10;
  bool is_closed = 11;
}

// message GetCommutationRequest {
//   double latitude = 1;
//   double longitude = 2;
// }
// 
// message GetCommutationResponse {
//   bytes screenshot_png = 1;
//   repeated NearbyObject nearby_objects = 2;
// }
// 
// message NearbyObject {
//   int64 id = 1;
//   string name = 2;
//   string type = 3;
// }

service ScraperService {
  // Method to get switching data.
  // rpc GetCommutationData(GetCommutationRequest) returns (GetCommutationResponse);

  // Method to get a list of employees.
  rpc GetEmployees(GetEmployeesRequest) returns (GetEmployeesResponse);

  // Method for getting tasks for the current day.
  rpc GetDailyTasks(GetDailyTasksRequest) returns (GetDailyTasksResponse);

  // Method to get a list of type of tasks.
  rpc GetTaskTypes(GetTaskTypesRequest) returns (GetTaskTypesResponse);
}

message GetEmployeesRequest {
    string known_hash = 1;
}
message GetEmployeesResponse {
  string new_hash = 1;
  repeated Employee employees = 2;
}

message GetDailyTasksRequest {
  string known_hash = 1;
  google.protobuf.StringValue date = 2;
}

message GetDailyTasksResponse {
  string new_hash = 1;
  repeated Task tasks = 2;
}

message GetTaskTypesRequest {
  string known_hash = 1;
}

message GetTaskTypesResponse {
  string new_hash = 1;
  repeated string types = 2;
}